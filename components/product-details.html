<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KickStar - eCommerce Shoes Store</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.6.0/remixicon.min.css">

    <link rel="shortcut icon" href="../images/logo2.svg" type="image/x-icon">
    <link rel="stylesheet" href="../css/product-details.css">
</head>

<body>
    <div class="container">
        <div class="product-details-container">
            <div class="product-details-page">
                <div class="product-details-preview">
                    <!-- ðŸ“¸ Left: Images -->
                    <div class="product-image-section">
                        <div class="product-image-preview">
                            <img id="main-product-img" src="../images/1.png" data-default="../images/1.png" width="100%" alt="Product Image" />
                        </div>
                        <div class="product-thumbnails-wrapper">
                            <button class="thumbnail-scroll-btn thumbnail-scroll-left hidden"
                                type="button">&#10094;</button>
                            <div class="product-thumbnails">
                                <img src="../images/1.png" alt="" />
                                <img src="../images/2.png" alt="" />
                                <img src="../images/3.jpg" alt="" />
                            </div>
                            <button class="thumbnail-scroll-btn thumbnail-scroll-right" type="button">&#10095;</button>
                        </div>
                    </div>
                    <!-- ðŸ“‹ Right: Details -->
                    <div class="product-details-section">
                        <h3 id="product-name">Giannis Freak 4 Basketball Shoes</h3>
                        <small id="product-type">Sneakers â€¢ Unisex</small><br><br>
                        <p id="product-price">
                            <strong style="color: red;">KES 2000</strong>
                            <span style="text-decoration: line-through; color: gray;">KES 2500</span>
                        </p><br>
                        <form id="variant-form">
                            <h4>Available Colors</h4><br>
                            <div class="product-colors">
                                <img src="../images/1.png" title="Red" width="40" height="40" class="color-btn selected"
                                    style="border-radius: 50%; cursor: pointer;" data-color-id="1"
                                    data-image="../images/1.png">
                                <img src="../images/2.png" title="Blue" width="40" height="40" class="color-btn"
                                    style="border-radius: 50%; cursor: pointer;" data-color-id="2"
                                    data-image="../images/2.png">
                                <img src="../images/3.jpg" title="Green" width="40" height="40" class="color-btn"
                                    style="border-radius: 50%; cursor: pointer;" data-color-id="3"
                                    data-image="../images/3.jpg">
                            </div><br>
                            <h4>Select Size</h4><br>

                            <select name="variant_id" class="variant-select" id="variant-select" required>
                                <option value="1" data-price="2500" data-sale="2000" data-stock="10">Size: 8 | Stock: 10
                                    | KES 2000</option>
                                <option value="2" data-price="2500" data-sale="" data-stock="5">Size: 9 | Stock: 5 | KES
                                    2500</option>
                                <option value="3" data-price="2500" data-sale="" data-stock="0">Size: 10 | Stock: 0 |
                                    KES 2500</option>
                            </select>
                            <br><br>
                            <label>Quantity:</label>
                            <input type="number" name="quantity" id="qty-input" value="1" min="1" max="10" step="1">
                            <br><br>
                            <button type="submit" class="add-to-cart-btn" id="add-to-cart-btn">Add to Cart</button>
                            <p id="add-cart-message" style="color: green; font-weight: bold;"></p>
                        </form>
                        <br>
                        <p id="product-description">A very nice shoe for all occasions. Comfortable, stylish, and
                            durable.</p>
                    </div>
                </div>
            </div>
        </div>

        <br>
        <hr>
        <br>
    </div>

    <script>

        // --- Thumbnails scroll logic ---
        function updateThumbScrollBtns() {
            const container = document.querySelector('.product-thumbnails');
            const leftBtn = document.querySelector('.thumbnail-scroll-left');
            const rightBtn = document.querySelector('.thumbnail-scroll-right');
            if (!container) return;
            leftBtn.classList.toggle('hidden', container.scrollLeft <= 0);
            rightBtn.classList.toggle('hidden', container.scrollLeft >= container.scrollWidth - container.clientWidth - 1);
        }
        document.querySelector('.thumbnail-scroll-left').addEventListener('click', function () {
            const container = document.querySelector('.product-thumbnails');
            const scrollAmount = container.querySelector('img')?.offsetWidth + 10 || 70;
            container.scrollBy({ left: -scrollAmount, behavior: 'smooth' });
        });
        document.querySelector('.thumbnail-scroll-right').addEventListener('click', function () {
            const container = document.querySelector('.product-thumbnails');
            const scrollAmount = container.querySelector('img')?.offsetWidth + 10 || 70;
            container.scrollBy({ left: scrollAmount, behavior: 'smooth' });
        });
        document.querySelector('.product-thumbnails').addEventListener('scroll', function () {
            clearTimeout(this._scrollTimeout);
            this._scrollTimeout = setTimeout(updateThumbScrollBtns, 100);
        });
        window.addEventListener('resize', updateThumbScrollBtns);
        updateThumbScrollBtns();

        // Swap main image on thumbnail hover
        document.querySelectorAll('.product-thumbnails img').forEach(img => {
            img.addEventListener('mouseover', function () {
                document.getElementById('main-product-img').src = this.src;
            });
            img.addEventListener('mouseout', function () {
                document.getElementById('main-product-img').src = document.getElementById('main-product-img').dataset.default;
            });
        });

        // Switch color
        document.querySelectorAll('.color-btn').forEach(btn => {
            btn.addEventListener('click', function () {
                document.querySelectorAll('.color-btn').forEach(b => b.classList.remove('selected'));
                btn.classList.add('selected');
                // Change main image and thumbnails
                const colorImage = btn.dataset.image;
                document.getElementById('main-product-img').src = colorImage;
                document.getElementById('main-product-img').dataset.default = colorImage;
                // For demo, update thumbnails to match color (in real app, use color-specific images)
                const thumbs = document.querySelector('.product-thumbnails');
                thumbs.innerHTML = '';
                [colorImage, '../images/2.png', '../images/3.jpg'].forEach(src => {
                    const el = document.createElement('img');
                    el.src = src;
                    el.width = 60;
                    el.height = 60;
                    el.style = "aspect-ratio: 1; object-fit: cover; margin-right: 5px; border: 1px solid #ccc; padding: 2px;";
                    el.addEventListener('mouseover', function () {
                        document.getElementById('main-product-img').src = src;
                    });
                    el.addEventListener('mouseout', function () {
                        document.getElementById('main-product-img').src = colorImage;
                    });
                    thumbs.appendChild(el);
                });
            });
        });

        // Update price and stock on size change
        document.getElementById('variant-select').addEventListener('change', function (e) {
            const opt = e.target.selectedOptions[0];
            const price = opt.dataset.price;
            const sale = opt.dataset.sale;
            const stock = opt.dataset.stock;
            const priceEl = document.getElementById('product-price');
            priceEl.innerHTML = sale && sale !== ''
                ? `<strong style="color:red;">KES ${sale}</strong> <span style="text-decoration:line-through; color:gray;">KES ${price}</span>`
                : `<strong>KES ${price}</strong>`;
            const qtyInput = document.getElementById('qty-input');
            qtyInput.max = stock;
            if (+qtyInput.value > +stock) qtyInput.value = 1;
        });

        // Add to Cart (demo only)
        document.getElementById('variant-form').addEventListener('submit', function (e) {
            e.preventDefault();
            const select = document.getElementById('variant-select');
            const variantId = select?.value;
            const qty = document.getElementById('qty-input').value;
            const opt = select.selectedOptions[0];
            const stock = opt.dataset.stock;
            const message = document.getElementById('add-cart-message');
            if (!variantId) {
                message.textContent = "Please select a size.";
                return;
            }
            if (+qty > +stock) {
                message.textContent = "Not enough stock.";
                return;
            }
            if (+stock === 0) {
                message.textContent = "This size is out of stock.";
                return;
            }
            message.textContent = `Added ${qty} item(s) to cart! (Demo only)`;
        });
    </script>
</body>

</html>